<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Metro</title>
        <link rel="stylesheet" href="stylesheet.css">
    </head>

    <body>
        <div id="container-flexbox">
            <div id="container-inputs">
                <select id="nom-pdt">
                    <option id="Huile de palme (L)">Huile de palme (L)</option>
                    <option id="Gluten (kg)">Gluten (kg)</option>
                    <option id="Farine de blé T55 (kg)">Farine de blé T55 (kg)</option>
                    <option id="Sirop de maïs (L)">Sirop de maïs (L)</option>
                    <option id="Glycérine (L)">Glycérine (L)</option>
                    <option id="Javel (L)">Javel (L)</option>
                </select>

                <input id="ref-pdt" placeholder="Référence du produit">
                <input id="qte-pdt" type="number" min="0" max="100">

                <button id="btn">Ajouter</button>
                
            </div>
            <p>Prix :<span id="prix"></span></p>
            <table id="tableau-stock">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Référence</th>
                        <th>Stock</th>
                    </tr>
                </thead>
            </table>
            <button id="btn-valider">Valider</button>
            
        </div>

        <script src="bdd.js" type="text/javascript"></script>
        <script src="fonctions.js" type="text/javascript"></script>
        <script>

            /*////////////             VARIABLES                       ////////////////*/

            let nb_item = 0;    // le numéro de l'item commandé
            let tableau_HTML = document.getElementById("tableau-stock");


            /*/////////////                     SCRIPT                     //////// */

            affichageStock(stock_user, tableau_HTML);   // on affiche le tableau du stock dans la page web
                                                        // à partir du stock préalablement enregistré

            btn.addEventListener('click', () => {   // à l'envoi du formulaire :
                
                // récupération des inputs
                let input_nom = document.getElementById("nom-pdt");
                input_nom = input_nom.options[input_nom.selectedIndex].value;
                let input_ref = document.getElementById("ref-pdt").value;
                let input_qte = document.getElementById("qte-pdt").value;

                // vérification des entrées
                if (checkCmd(input_ref, input_qte) === 1) {
                    // si elles sont correctes, on peut traiter la commande
                    traiterCmd(input_nom, input_ref, input_qte, stock_user, tableau_HTML);
                } else {
                    return;
                }

                return 'erreur 1';
            });


        </script>
    </body>

</html>